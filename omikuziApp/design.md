# おみくじアプリ 設計書

## 1. 概要
本アプリケーションは、Webブラウザ上で動作するシンプルなおみくじアプリです。
ユーザーがアクセスするたびに、ランダムな運勢を表示します。
Node.js と Express フレームワークの基本的な使い方、および EJS テンプレートエンジンの利用方法を学習することを目的としています。

## 2. 機能要件
1.  **おみくじ実行機能**
    - トップページ (`/`) にアクセスすると、サーバー側でランダムに運勢を決定し、表示する。
    - 運勢の種類は「大吉」「中吉」「小吉」「吉」「凶」の5種類とする。
2.  **再実行機能**
    - 「もう一度引く」ボタン（またはリンク）を押下することで、再度おみくじを引くことができる（ページのリロード）。

## 3. システム構成
-   **ランタイム**: Node.js
-   **フレームワーク**: Express
-   **テンプレートエンジン**: EJS
-   **スタイルシート**: CSS (public/stylesheets/style.css)

## 4. ディレクトリ構成
```
omikuziApp/
├── bin/
│   └── www           # サーバー起動スクリプト
├── public/
│   └── stylesheets/
│       └── style.css # スタイルシート
├── routes/
│   └── index.js      # ルーティングとロジック（おみくじ処理）
├── views/
│   ├── error.ejs     # エラー画面
│   └── index.ejs     # トップページ（おみくじ結果表示）
├── app.js            # アプリケーション設定
└── package.json      # 依存関係定義
```

## 5. 詳細設計

### 5.1 ルーティングとロジック (`routes/index.js`)
-   **パス**: `/` (GET)
-   **処理概要**:
    1.  運勢の配列を定義する。
        -   `['大吉', '中吉', '小吉', '吉', '凶']`
    2.  配列からランダムに1つの要素を取得する。
        -   `Math.random()` を使用。
    3.  テンプレート `index.ejs` をレンダリングする。
        -   渡すデータ: `title` ('おみくじアプリ'), `fortune` (決定した運勢)

### 5.2 画面設計 (`views/index.ejs`)
-   **レイアウト**:
    -   中央揃えのコンテナ内にコンテンツを配置。
    -   ヘッダー: アプリタイトル (`<%= title %>`)
    -   メイン:
        -   テキスト「今日の運勢は...」
        -   運勢結果 (`<%= fortune %>`) - 大きく強調表示
        -   テキスト「です！」
    -   フッター/アクション:
        -   「もう一度引く」ボタン（`href="/"` のリンク）

### 5.3 デザイン (`public/stylesheets/style.css`)
-   **テーマカラー**: 白背景に赤文字（日本の伝統的な紅白イメージ）。
-   **スタイル**:
    -   `body`: 背景色 `#f0f0f0`、文字色 `#333`、中央揃え。
    -   `.container`: 白背景、角丸、影付き、最大幅 500px。
    -   `h1`, `.fortune`, `.btn`: 赤色 (`#d32f2f`) を基調とする。
    -   `.btn`: ボタン風の見た目にする（パディング、背景色、ホバー効果）。

## 6. 実装ステップ（学習者向け）
1.  **プロジェクトの作成**: `express-generator` を使用して雛形を作成する。
    ```bash
    npx express-generator --view=ejs omikuziApp
    cd omikuziApp
    npm install
    ```
2.  **ロジックの実装**: `routes/index.js` を編集し、ランダムな運勢を生成して View に渡す処理を書く。
3.  **ビューの作成**: `views/index.ejs` を編集し、結果を表示する HTML を書く。
4.  **スタイルの適用**: `public/stylesheets/style.css` を編集し、見た目を整える。
5.  **動作確認**: `npm start` でサーバーを起動し、`http://localhost:3000` にアクセスして確認する。
